<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button> <!-- Abre el menÃº -->
    </ion-buttons>
    <ion-title>Administrar Usuarios</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="recargarPagina()">
        <ion-icon slot="icon-only" class="fa fa-refresh"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-card>
    <div class="search-container">
      <ion-button (click)="crearUsuario()" expand="block" class="single-line-button" color="secondary">
        <ion-icon name="people"></ion-icon>
        Crear Usuario
      </ion-button>
      <ion-searchbar [(ngModel)]="searchTerm" (ionInput)="buscarUsuarios()" placeholder="Buscar por nombre o usuario..."></ion-searchbar>
    </div>
  </ion-card>   

  <ion-card>
    <div class="scroll-container">
      <ion-grid>
        <!-- Encabezados -->
        <ion-row class="header-row">
          <ion-col size="4" (click)="toggleSort('apellidos')"><strong>Apellidos y Nombres</strong></ion-col>
          <ion-col size="2" (click)="toggleSort('usuario')"><strong>Usuario</strong></ion-col>
          <ion-col size="2" (click)="toggleSort('rol')"><strong>Rol</strong></ion-col>
          <ion-col size="2" (click)="toggleSort('estado')"><strong>Estado</strong></ion-col>
          <ion-col size="2"><strong>Acciones</strong></ion-col>
        </ion-row>

        <!-- Filas de Usuarios -->
        <ion-row *ngFor="let usuario of usuarios">
          <ion-col size="4">{{ usuario.apellidos }} {{ usuario.nombres }}</ion-col>
          <ion-col size="2">{{ usuario.usuario }}</ion-col>
          <ion-col size="2">{{ getRolTexto(usuario.rol) }}</ion-col>
          
          <ion-col size="2">
            <ion-badge [color]="getEstadoColor(usuario.estado)">
              {{ getEstadoTexto(usuario.estado) }}
            </ion-badge>
          </ion-col>
          
          <ion-col size="2">
            <ion-button color="secondary" size="small" (click)="editarUsuario(usuario._id)">
              <ion-icon slot="icon-only" class="fa fa-pencil"></ion-icon>
            </ion-button>
            <ion-button color="danger" size="small" (click)="eliminarUsuario(usuario._id)">
              <ion-icon slot="icon-only" class="fa fa-ban"></ion-icon>
            </ion-button>
          </ion-col>
          
        </ion-row>
      </ion-grid>
    </div>
  </ion-card>
</ion-content>
